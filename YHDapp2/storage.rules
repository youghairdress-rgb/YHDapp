rules_version = '2';

service firebase.storage {
match /b/{bucket}/o {
// Allow authorized users to upload photos.
// The path structure (customer_photos/{userId}/{...}) should be enforced
// by the Cloud Function that generates the signed URL for upload,
// ensuring users can only write to their own designated folder.
match /customer_photos/{userId}/{allPaths=**} {
allow read: if true; // Or if request.auth != null; for private photos
allow write: if request.auth != null && request.auth.uid == userId;
}
}
}